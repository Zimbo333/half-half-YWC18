<!DOCTYPE html>
<html>
<head>
	<title>คนละครึ่ง</title>
	<meta charset=utf-8>
	<meta name=description content="">
	<meta name=viewport content="width=device-width, initial-scale=1">
	<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>

	<div id="app">
		<header>
			<div class="container mx-auto py-3">
				<div class="grid grid-cols-6 gap-4 items-center">
					<div class="col-span-1">
						<img src="img/logo.png" class=""> 
					</div>
					<div class="col-span-5">form search</div>
				</div>
			</div>
		</header>
		<section class="bg-ci-blue text-white">
			<div class="container mx-auto py-3">
				<a href="#!" class="font-light underline">หน้าแรก</a><span class="px-4">/</span><b>ค้นหา</b>
			</div>
		</section>
		<section class="mx-auto p-5">
			<h2 class="font-black text-xl">ผลการค้นหา ร้านอาหารและเครื่องดื่ม ทั้งหมด</h2>
			<div class="py-4"></div>
			<div class="grid grid-cols-4 gap-4">
				<div class="col-span-1">
					<aside class="p-4 border-solid border-blue-900 border rounded">
						<form>
							<h3 class="font-black text-lg">ประเภทร้านค้า</h3>
							<div class="py-4">
								<div class="py-1">
									<label class="cursor-pointer">
										<input type="radio" name="category" value="all" checked v-model="search.cat">
										<span class="px-2">ทั้งหมด</span>
									</label>
								</div>
								<div v-for="(i,index) in api.categories" :key="index" class="py-1">
									<label class="cursor-pointer">
										<input type="radio" name="category" :value="index" v-model="search.cat">
										<span class="px-2">{{i.name}}</span>
									</label>
								</div>
							</div>
							<div class="">
								<label class="font-black text-lg mb-2 block">จังหวัด/ใกล้ฉัน</label>
								<div class="border border-gray-300 border-solid block w-full py-2 px-3 rounded-md shadow-sm relative"  :data-value="search.province">
									<i class="fas fa-map-marker-alt" id="map-icon"></i>
									<select name="province" class="cursor-pointer  block w-full focus:outline-none" required v-model="search.province">
										<option value="nearby">พื้นที่ใกล้ฉัน</option>
										<option v-for="(i,index) in api.provinces" :key="index" :value="i">{{i}}</option>
									</select>
								</div>
							</div>
							<div class="py-5">
								<label class="font-black text-lg mb-2 block">ราคา</label>
								<div class="border border-gray-300 border-solid block w-full py-2 px-3 rounded-md shadow-sm ">
									<select name="priceRange" class="cursor-pointer  block w-full focus:outline-none" required v-model="search.price" :data-value="search.price">
										<option value="placeholder" disabled selected>กรุณาเลือก</option>
										<option v-for="(i,index) in api.priceRange" :key="index" :value="i">{{i}}</option>
									</select>
								</div>
							</div>
							<div class="" v-if="search.cat != 'all'">
								<label class="font-black text-lg mb-2 block py-3">ประเภท{{api.categories[search.cat].name}}</label>
								<div class="text-sm">
									<div class="">
										<label class="cursor-pointer">
											<input type="radio" name="subcategory" value="all" checked v-model="search.subcat" checked>
											<span class="px-2">ทั้งหมด</span>
										</label>
									</div>
									<div v-for="(i,index) in api.categories[search.cat].subcategories" :key="index" class="py-1">
										<label class="cursor-pointer">
											<input type="radio" name="subcategory" :value="i" v-model="search.subcat">
											<span class="px-2">{{i}}</span>
										</label>
									</div>
								</div>
							</div>
						</form>
					</aside>
				</div>
				<div class="col-span-3">
					<article v-for="(shop,index) in shops" class="border border-solid border-blue-300 mb-4 p-2">
						<div class="grid grid-cols-4 gap-4">
							<div class="col-span-1">
								<div class="cover" :style="{'--img':`url(${shop.coverImageId})`}"></div>
							</div>
							<div class="col-span-3"></div>
						</div>

						{{shop}}
					</article>
				</div>
			</div>
		</section>
		{{api}}
		<div class="bg-gray-700 text-white p-10">
			{{shop}}
		</div>
	</div>
	<script>
		let app = new Vue({
			el:'#app',
			data:{
				loading:true,
				api:null,
				search:{
					cat:"all",
					province:"nearby",
					price:"placeholder",
					subcat:"all",
				},
			},
			computed:{
				shops: function(){
					let merchants = this.api.merchants
					let shops = {}
					if (this.search.cat == 'all') {
						shops = merchants
					}else{

					}
					return shops
				}
			},
			watch:{

			}
		})
		let static_data = {};
		document.addEventListener('DOMContentLoaded', function() {
			fetch('https://panjs.com/ywc18.json')
			.then(response => response.json())
			.then(json => {
				app.loading = false
				app.api = json
				static_data = json
				console.log(app.api)
			})
		}, false);
	</script>
</body>
</html>